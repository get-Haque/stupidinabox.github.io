LollyMatch.StartMenu=function(){this.numberArray=[],this.angleArray=[0,45,90,135,180,220,260,300],this.buttonGroup=null},LollyMatch.StartMenu.prototype={create:function(){console.log("Menu"),this.ml=new MultiLang,this.ml.phrases=this.cache.getJSON("mylangs"),this.ml.setLanguage(LollyMatch.langSelect),localStorage.setItem("LollyMatchSound",LollyMatch.isSoundMute);for(var t=[.1,.16,.2,.24,.28],i=-60;i<this.game.width+100;i+=150)for(var e=0;e<this.game.height+100;e+=180){var s=this.rnd.between(0,4),h=Phaser.ArrayUtils.getRandomItem(this.angleArray),a=this.add.sprite(i,e,"backSymb",s),o=Phaser.ArrayUtils.getRandomItem(t);a.scale.setTo(LollyMatch.scaleFactor+o),a.angle=h,a.alpha=.6}for(var l=this.rnd.between(250,220),r=-20;r<this.game.width+20;r+=l)for(var n=-20;n<.99*this.game.height;n+=l){var d=this.rnd.between(0,5),c=this.add.sprite(r,n,"lolly",d);c.angle=Phaser.ArrayUtils.getRandomItem(this.angleArray),c.scale.setTo(LollyMatch.scaleFactor+.1)}this.buttonGroup=this.add.group();var y=this.add.graphics(0,0);y.lineStyle(5,16777215),y.moveTo(LollyMatch.safeZone.x+LollyMatch.safeZone.width/2,0),y.lineTo(LollyMatch.safeZone.x+LollyMatch.safeZone.width/2,.3*LollyMatch.safeZone.height),this.sunSize=.2*LollyMatch.safeZone.height,this.sun=this.add.sprite(LollyMatch.safeZone.x+LollyMatch.safeZone.width/2,.3*LollyMatch.safeZone.height,"sunM"),this.sun.height=this.sunSize,this.sun.scale.x=this.sun.scale.y,this.sun.anchor.setTo(.5),this.sun.angle=10,this.sunLight=this.add.sprite(LollyMatch.safeZone.x+LollyMatch.safeZone.width/2,.3*LollyMatch.safeZone.height,"sunM",2),this.sunLight.width=.3*LollyMatch.safeZone.height,this.sunLight.height=this.sunLight.width,this.sunLight.anchor.setTo(.5),this.sun.bringToTop();var u=this.add.sprite(this.world.centerX,this.world.centerY,"uiBig",0);u.anchor.setTo(.5),u.width=.35*LollyMatch.safeZone.width,u.height=u.width,this.buttonGroup.add(u),u.inputEnabled=!0,u.events.onInputDown.add(this.startGame,this);var g;g=LollyMatch.isSoundMute?6:5;var p=this.add.sprite(u.x-u.width,u.y+u.height,"uiBig",g);p.width=.28*LollyMatch.safeZone.width,p.height=p.width,p.anchor.setTo(.5),this.buttonGroup.add(p),p.inputEnabled=!0,p.events.onInputDown.add(this.soundToggle,this);var f=this.add.sprite(u.x,u.y+u.height,"uiBig",3);f.width=.28*LollyMatch.safeZone.width,f.height=p.width,f.anchor.setTo(.5),this.buttonGroup.add(f),f.inputEnabled=!0,f.events.onInputDown.add(this.more,this);var w=this.add.sprite(u.x+u.width,u.y+u.height,"uiBig",4);for(w.width=.28*LollyMatch.safeZone.width,w.height=p.width,w.anchor.setTo(.5),this.buttonGroup.add(w),w.inputEnabled=!0,w.events.onInputDown.add(this.changeLang,this);this.numberArray.length<6;){var M=this.rnd.between(0,5);this.numberArray.indexOf(M)>-1||(this.numberArray[this.numberArray.length]=M)}for(var x=.6*LollyMatch.safeZone.width,v=0,L=-x;L<this.game.width+2*x;L+=x/2.5){var m=this.numberArray[v],T=this.add.image(L,this.game.height,"brick",m);T.width=x,T.height=x,T.anchor.setTo(.3),v<this.numberArray.length?v++:v=1}this.game.world.bringToTop(this.buttonGroup);var b=this.add.image(this.world.centerX,.2*this.world.height,"titleImage");b.anchor.setTo(.5),b.width=.85*LollyMatch.safeZone.width,b.height=b.width/3,this["switch"]=this.add.audio("switch"),this.switch2=this.add.audio("switch2"),this["switch"].volume=.4,this.switch2.volume=.5;var S=this.add.audio("rainbows"),k=this.add.audio("reload"),A=this.add.audio("revive");k.volume=.5,LollyMatch.otherSound=[k,A];var Z=[S];this.sound.setDecodedCallback(Z,function(){Z.shift(),0===LollyMatch.counter&&(S.loopFull(.6),LollyMatch.counter++)},this)},soundToggle:function(t){this.sound.mute?(this["switch"].play(),this.sound.mute=!1,t.frame=5,LollyMatch.isSoundMute=!1,localStorage.setItem("LollyMatchSound",JSON.stringify(LollyMatch.isSoundMute))):(this.sound.mute=!0,t.frame=6,LollyMatch.isSoundMute=!0,localStorage.setItem("LollyMatchSound",JSON.stringify(LollyMatch.isSoundMute)))},more:function(){this["switch"].play(),this.buttonGroup.visible=!1;var t=this.createBack(),i=this.add.group(),e=this.add.sprite(t.x+.98*t.width,t.y+10,"uiSmall",2);e.anchor.setTo(.5),e.scale.setTo(LollyMatch.scaleFactor+.1),e.inputEnabled=!0;var s=this.add.text(t.x+t.width/2,t.y+.5*t.height,this.ml.get("Hello \n my name is Saniul Haque \n Please contact me at \ngets.haque@gmail.com \n \nthank you for playing this game"),LollyMatch.style2.c);s.addColor("#F20042",0),s.anchor.set(.5),i.add(t),i.add(e),i.add(s),e.events.onInputDown.add(function(){this["switch"].play(),i.destroy(),this.buttonGroup.visible=!0},this)},changeLang:function(){this["switch"].play(),this.buttonGroup.visible=!1;var t=this.add.group(),i=this.createBack(),e=this.add.sprite(i.x+.98*i.width,i.y+10,"uiSmall",2);e.anchor.setTo(.5),e.scale.setTo(LollyMatch.scaleFactor+.1),e.inputEnabled=!0;var s=this.add.text(i.x+i.width/2,i.y+.1*i.height,this.ml.get("Select Language"),LollyMatch.style);s.addColor("#F20042",0),s.anchor.set(.5);var h=this.add.graphics(0,0);h.lineStyle(1.5,15859778),h.moveTo(i.x,i.y+.18*i.height),h.lineTo(i.x+i.width,i.y+.18*i.height),langGroup=this.initLangList(i);var a=(LollyMatch.font,this.add.text(i.x+i.width/2,i.y+.9*i.height,"*other than english is just \nfor simulation perpose.",LollyMatch.style2.c));a.addColor("#F20042",0),a.anchor.setTo(.5),t.add(i),t.add(e),t.add(s),t.add(h),t.add(langGroup),t.add(a),e.events.onInputDown.add(function(){this["switch"].play(),t.destroy(),this.buttonGroup.visible=!0},this)},initLangList:function(t){var i=t.y+.28*t.width,e=this.add.group();for(var s in this.ml.phrases){var h=this.add.text(t.x+t.width/2,i,this.ml.phrases[s].langdesc,LollyMatch.style);h.addColor("#F20042",0),h.anchor.setTo(.5),h.value=s,h.value==LollyMatch.langSelect&&(this.star=this.add.sprite(h.x-h.width/1.3,i,"uiSmall",1),this.star.width=h.height,this.star.height=this.star.width,this.star.anchor.setTo(.5)),h.inputEnabled=!0,h.events.onInputDown.add(this.setLang,this),i+=LollyMatch.scaleFactor>.4?.1*t.width:.12*t.width,e.add(h)}return e.add(this.star),e},setLang:function(t){this.switch2.play(),LollyMatch.langSelect=t.value,this.star.x=t.x-t.width/1.3,this.star.y=t.y,this.ml.setLanguage(LollyMatch.langSelect),this.checkFont()},checkFont:function(){"en"==LollyMatch.langSelect?(LollyMatch.font="CartWheel",LollyMatch.fs=.038*LollyMatch.safeZone.width,LollyMatch.counter2=0,localStorage.setItem("LollyMatchhint",JSON.stringify(LollyMatch.counter2))):"ko"==LollyMatch.langSelect&&(LollyMatch.font="BMDOHYEON",LollyMatch.fs=.033*LollyMatch.safeZone.width,LollyMatch.counter2=0,localStorage.setItem("LollyMatchhint",JSON.stringify(LollyMatch.counter2))),LollyMatch.style={font:LollyMatch.fs+12+"px "+LollyMatch.font,fill:"#ffffff",align:"center"},LollyMatch.style2.a={font:LollyMatch.fs+22+"px "+LollyMatch.font,fill:"#F20042",align:"center"},LollyMatch.style2.b={font:LollyMatch.fs+22+"px "+LollyMatch.font,fill:"#cccccc",align:"center"},LollyMatch.style2.c={font:LollyMatch.fs+2+"px "+LollyMatch.font,fill:"#F20042",align:"center"},LollyMatch.style3={font:LollyMatch.fs+"px "+LollyMatch.font,fill:"#ffffff",align:"center"}},createBack:function(){var t=this.add.group(),i=.15*LollyMatch.safeZone.height,e=.25*LollyMatch.safeZone.height,s=this.add.sprite(0,0,"ui_back"),h=this.add.sprite(0,i,"ui_back"),a=this.add.sprite(0,e,"ui_back");return s.width=.82*LollyMatch.safeZone.width,s.height=s.width/2,h.width=s.width,h.height=s.height,a.width=s.width,a.height=s.height,t.add(s),t.add(h),t.add(a),t.x=this.world.centerX-t.width/2,t.y=this.world.centerY-t.height/2.2,t},startGame:function(){this["switch"].play(),this.state.start("Game")}};